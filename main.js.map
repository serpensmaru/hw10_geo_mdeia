{"version":3,"file":"main.js","mappings":"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","sources":["webpack://hw10_geo_media/./src/js/checkCoordinatesValidity.js","webpack://hw10_geo_media/./src/js/timerFunction.js","webpack://hw10_geo_media/./src/js/popupMessage.js","webpack://hw10_geo_media/./src/js/recordingFunction.js","webpack://hw10_geo_media/./src/js/widgetTimeLine.js","webpack://hw10_geo_media/./src/js/app.js","webpack://hw10_geo_media/./src/index.js"],"sourcesContent":["export default function checkCoordinatesValidity(inputValue) {\n  let newValue;\n  const validObj = {};\n\n  if (inputValue.startsWith(\"[\") && inputValue.endsWith(\"]\")) {\n    newValue = inputValue.slice(1, inputValue.length - 1).split(\",\");\n  } else {\n    newValue = inputValue.split(\",\");\n  }\n\n  if (newValue.length !== 2) return validObj;\n  const lat = parseFloat(newValue[0].trim());\n  const lng = parseFloat(newValue[1].trim());\n\n  if (!Number.isNaN(lat) && Math.abs(lat) <= 90) {\n    validObj.lat = lat;\n  }\n\n  if (!Number.isNaN(lng) && Math.abs(lng) <= 180) {\n    validObj.lng = lng;\n  }\n\n  return validObj;\n}\n","/* eslint-disable no-param-reassign */\nexport default function timerFunction(/* timer */ minutes, seconds) {\n  const sec = (+seconds.innerText + 1) % 60;\n  if (sec < 10) seconds.innerText = `0${sec}`;\n  if (sec >= 10) seconds.innerText = sec;\n  if (sec === 0) {\n    const min = +minutes.innerText + 1;\n    if (min < 10) minutes.innerText = `0${min}`;\n    if (min >= 10) minutes.innerText = min;\n  }\n}\n","export default class PopupMessage {\n  constructor() {\n    this.container = document.querySelector(\".main_container\");\n  }\n\n  showMessage() {\n    if (this.container.querySelector(\"[data-modal=modal]\")) return;\n    const modalHtml = `\n    <div data-modal=\"modal\" class=\"modal\">\n      <div data-id=\"modalNotification\" class=\"modal_content modal_notification\">\n        <div>\n          <p>Что-то пошло не так</p>\n          <p>К сожалению, не удалось ничего записать,\n            пожалуйста, дайте разрешение на использование записи,\n            либо воспользуйтесь другим браузером</p>          \n        </div>\n        <button type=\"submit\" data-id=\"modalButtonOk\" class=\"modal_button button_ok\">Ок</button> \n      </div>\n    </div>\n    `;\n\n    this.container.insertAdjacentHTML(\"afterBegin\", modalHtml);\n    const modalPopup = this.container.querySelector(\"[data-modal=modal]\");\n    const modalButtonOK = modalPopup.querySelector(\"[data-id=modalButtonOk]\");\n    modalButtonOK.addEventListener(\"click\", (event) => {\n      event.preventDefault();\n      modalPopup.remove();\n    });\n  }\n}\n","import timerFunction from \"./timerFunction\";\nimport PopupMessage from \"./popupMessage\";\n\nexport default async function recordingFunction(mediatype) {\n  if (!navigator.mediaDevices) {\n    console.log(\"navigator.mediaDevices not available\");\n    return false;\n  }\n\n  let mediaContent;\n  const mediaType = mediatype;\n\n  try {\n    if (!window.MediaRecorder) {\n      console.log(\"window.MediaRecorder not available\");\n      return false;\n    }\n\n    const container = document.querySelector(\".main_container\");\n    const timer = container.querySelector(\"[data-id=timelineRecordTime]\");\n    const minutes = timer.querySelector(\"[data-timer=timerMinutes]\");\n    const seconds = timer.querySelector(\"[data-timer=timerSecondes]\");\n    minutes.innerText = \"00\";\n    seconds.innerText = \"00\";\n    const submitButton = container.querySelector(\n      \"[data-id=timelineSubmitRecordButton]\"\n    );\n    const cancelButton = container.querySelector(\n      \"[data-id=timelineCancelRecordButton]\"\n    );\n    const widgetTimelineForm = container.querySelector(\n      \"[data-id=timelineForm]\"\n    );\n    let timerId;\n    const media = document.createElement(`${mediaType}`);\n    const stream = await navigator.mediaDevices.getUserMedia({\n      audio: true,\n      video: mediaType === \"video\",\n    });\n    const recorder = new MediaRecorder(stream);\n    const chunks = [];\n\n    const videoPlayer = document.createElement(\"div\");\n    if (mediaType === \"video\") {\n      videoPlayer.classList.add(\"video_player\");\n      media.srcObject = stream;\n      media.play();\n      media.controls = true;\n      media.muted = \"muted\";\n      videoPlayer.append(media);\n      widgetTimelineForm.before(videoPlayer);\n    }\n\n    const submitRecord = () => {\n      recorder.stop();\n      submitButton.removeEventListener(\"click\", submitRecord);\n    };\n\n    const cancelRecord = () => {\n      recorder.stop();\n      cancelButton.removeEventListener(\"click\", cancelRecord);\n    };\n\n    recorder.addEventListener(\"start\", () => {\n      console.log(\"recording started\");\n      timerId = setInterval(() => timerFunction(minutes, seconds), 1000);\n    });\n\n    recorder.addEventListener(\"dataavailable\", (evt) => {\n      console.log(\"data available\");\n      chunks.push(evt.data);\n    });\n\n    submitButton.addEventListener(\"click\", submitRecord);\n\n    cancelButton.addEventListener(\"click\", cancelRecord);\n\n    recorder.addEventListener(\"stop\", () => {\n      const blob = new Blob(chunks);\n      media.src = URL.createObjectURL(blob);\n      media.controls = true;\n      clearInterval(timerId);\n      stream.getTracks().forEach((track) => track.stop());\n      media.srcObject = null;\n      videoPlayer.remove();\n    });\n\n    recorder.start();\n    mediaContent = media;\n  } catch (e) {\n    console.error(e);\n    const popup = new PopupMessage();\n    popup.showMessage();\n  }\n  return mediaContent;\n}\n","import checkCoordinatesValidity from \"./checkCoordinatesValidity\";\nimport recordingFunction from \"./recordingFunction\";\n\nexport default class WidgetTimeLine {\n  constructor() {\n    this.container = document.querySelector(\".main_container\");\n  }\n\n  initHandlers() {\n    this.postForm = this.container.querySelector(\"[data-id=timelineForm]\");\n    this.controlBar = this.container.querySelector(\n      \"[data-id=timelineControls]\"\n    );\n    this.buttonAudio = this.container.querySelector(\n      \"[data-id=timelineAudioButton]\"\n    );\n    this.buttonVideo = this.container.querySelector(\n      \"[data-id=timelineVideoButton]\"\n    );\n    this.buttonSubmitRecord = this.container.querySelector(\n      \"[data-id=timelineSubmitRecordButton]\"\n    );\n    this.buttonCancelRecord = this.container.querySelector(\n      \"[data-id=timelineCancelRecordButton]\"\n    );\n\n    this.postForm.addEventListener(\"submit\", (event) => {\n      this.submitPost(event);\n    });\n\n    this.controlBar.addEventListener(\"click\", (event) => {\n      if (!event.target.closest(\".timeline_button\")) return;\n      this.toggleControls();\n    });\n\n    this.buttonAudio.addEventListener(\"click\", ({ target }) => {\n      this.recordByMediaType(target);\n    });\n\n    this.buttonVideo.addEventListener(\"click\", ({ target }) => {\n      this.recordByMediaType(target);\n    });\n\n    this.buttonSubmitRecord.addEventListener(\"click\", () => {\n      if (this.postContent) this.checkGeoLocAPI(this.postContent);\n    });\n\n    this.buttonCancelRecord.addEventListener(\"click\", () => {\n      this.postContent = null;\n    });\n  }\n\n  async recordByMediaType(eventTarget) {\n    this.mediaType = undefined;\n    if (eventTarget.closest(\".audio_button\")) this.mediaType = \"audio\";\n    if (eventTarget.closest(\".video_button\")) this.mediaType = \"video\";\n    const mediaRecord = await recordingFunction(`${this.mediaType}`);\n    if (mediaRecord) this.postContent = mediaRecord;\n    if (!this.postContent) this.toggleControls();\n  }\n\n  toggleControls() {\n    let controlBarChildren = [...this.controlBar.children]\n    console.log(this.controlBar.children)\n    controlBarChildren.forEach((constrolBarEl) =>\n      constrolBarEl.classList.toggle(\"hidden\")\n    );\n  }\n\n  showModalManualCoords() {\n    if (this.container.querySelector(\"[data-modal=modal]\")) return;\n    const modalManualCoordsHtml = `\n    <div data-modal=\"modal\" class=\"modal\">\n      <div data-id=\"modalManualCoords\" class=\"modal_content modal_manual_coords\">\n        <div>\n          <p>Что-то пошло не так</p>\n          <p>К сожалению, нам не удалось определить ваше местоположение, пожалуйста, дайте разрешение на использование геолокации, либо введите координаты вручную</p>\n          <p>Широта и долгота через запятую</p>\n        </div>\n        <form data-id=\"modalForm\" class=\"modal_form\">\n          <input data-id=\"modalInput\" name=\"coords\" class=\"modal_input\" placeholder=\"Введите координаты, например: -90.12345, 180.12345\" required>\n          <div class=\"modal_footer\">\n            <span class=\"modal_footer_string hidden\">\n            </span>\n          </div> \n          <div class=\"modal_form_controls\"> \n            <button type=\"reset\" data-id=\"modalButtonCancel\" class=\"modal_button button_cancel\">Отмена</button> \n            <button type=\"submit\" data-id=\"modalButtonOk\" class=\"modal_button button_ok\">Ок</button> \n          </div>\n        </form>       \n      </div>\n    </div>\n    `;\n\n    this.container.insertAdjacentHTML(\"afterBegin\", modalManualCoordsHtml);\n\n    const modalPopup = this.container.querySelector(\"[data-modal=modal]\");\n    const modalForm = modalPopup.querySelector(\"[data-id=modalForm]\");\n    modalForm.setAttribute(\"novalidate\", true);\n\n    modalForm.addEventListener(\"reset\", () => {\n      modalForm.closest(\"[data-modal=modal]\").remove();\n      this.addPost(this.postContent);\n    });\n\n    modalForm.addEventListener(\"input\", () => {\n      if (modalForm.coords.classList.contains(\"invalid\"))\n        modalForm.coords.classList.remove(\"invalid\");\n    });\n\n    modalForm.addEventListener(\"submit\", (event) => {\n      event.preventDefault();\n      const inputValue = modalForm.coords.value.trim();\n      modalForm.coords.setCustomValidity(\"\");\n\n      const formValidity = checkCoordinatesValidity(inputValue);\n      this.coordsObj = formValidity;\n\n      const errorMessageCoords = \"Координаты введены некорректно.\";\n      const errorMessageLat =\n        \"Широта должна быть в пределах -90...+90 градусов.\";\n      const errorMessageLng =\n        \"Долгота должна быть в пределах -180...+180 градусов.\";\n      modalForm.coords.classList.add(\"invalid\");\n\n      if (inputValue === \"\") {\n        modalForm.coords.reportValidity();\n        return;\n      }\n\n      if (!this.coordsObj.lng && !this.coordsObj.lat) {\n        const errorMessage = `\n        ${errorMessageCoords}\n        ${errorMessageLat}\n        ${errorMessageLng}\n        `;\n        modalForm.coords.setCustomValidity(errorMessage);\n        modalForm.coords.reportValidity();\n        return;\n      }\n\n      if (this.coordsObj.lng && !this.coordsObj.lat) {\n        const errorMessage = `\n        ${errorMessageCoords}\n        ${errorMessageLat}\n        `;\n        modalForm.coords.setCustomValidity(errorMessage);\n        modalForm.coords.reportValidity();\n        return;\n      }\n\n      if (!this.coordsObj.lng && this.coordsObj.lat) {\n        const errorMessage = `\n        ${errorMessageCoords}\n        ${errorMessageLng}\n        `;\n        modalForm.coords.setCustomValidity(errorMessage);\n        modalForm.coords.reportValidity();\n        return;\n      }\n\n      this.addPost(this.postContent, this.coordsObj.lat, this.coordsObj.lng);\n      modalPopup.remove();\n    });\n  }\n\n  init() {\n    if (this.container.querySelector(\"[data-widget=timelineWidget]\")) return;\n    const widgetTimelineHtml = `\n        <div data-widget=\"timelineWidget\" class=\"timeline_widget\">\n          <div data-id=\"timelinePosts\" class=\"timeline_posts\">\n          </div>    \n          <form data-id=\"timelineForm\" class=\"modal_form timeline_form\">\n            <input data-id=\"post\" name=\"post\" placeholder=\"Post something here...\" class=\"timeline_input\" required>   \n            <div data-id=\"timelineControls\" class=\"timeline_controls\">\n              <div data-id=\"timelineAudioButton\" class=\"timeline_button audio_button\">\n                <span>&#127908;</span>\n              </div>\n              <div data-id=\"timelineVideoButton\" class=\"timeline_button video_button\">\n                <span>&#127909;</span>\n              </div>\n              <div data-id=\"timelineSubmitRecordButton\" class=\"hidden timeline_button submit_record_button\">\n                <span>&#10004;</span>\n              </div>\n              <div data-id=\"timelineRecordTime\" class=\"hidden timeline_record_time\">\n                <span data-timer=\"timerMinutes\">00</span>:<span data-timer=\"timerSecondes\">00</span>\n              </div>\n              <div data-id=\"timelineCancelRecordButton\" class=\"hidden timeline_button cancel_record_button\">\n                <span>&#10006;</span>\n              </div>\n            </div>\n          </form>\n        </div> \n      `;\n\n    this.container.insertAdjacentHTML(\"afterBegin\", widgetTimelineHtml);\n\n    this.initHandlers();\n  }\n\n  submitPost(event) {\n    event.preventDefault();\n    const inputValue = this.postForm.post.value.trim();\n    if (inputValue === \"\") return;\n    this.postContent = inputValue;\n    this.checkGeoLocAPI(this.postContent);\n    this.postForm.reset();\n  }\n\n  checkGeoLocAPI(postContent) {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const { latitude, longitude } = position.coords;\n          this.addPost(postContent, latitude, longitude);\n        },\n        (error) => {\n          console.error(error);\n          this.showModalManualCoords();\n        }\n      );\n    } else {\n      console.log(\"browser geo API - false\");\n      this.showModalManualCoords();\n    }\n  }\n\n  addPost(postContent, latitude, longitude) {\n    const postBoard = this.container.querySelector(\"[data-id=timelinePosts]\");\n    if (!postBoard) return;\n    const date = new Date().toLocaleDateString();\n    const time = new Date().toLocaleTimeString();\n\n    let coordinates;\n    if (latitude && longitude) {\n      coordinates = `[${latitude}, ${longitude}]`;\n    } else {\n      coordinates = \"[-,-]\";\n    }\n\n    const postElement = document.createElement(\"div\");\n    const timeStampEl = document.createElement(\"span\");\n    const postContentEl = document.createElement(\"div\");\n    const coordsEl = document.createElement(\"span\");\n\n    postElement.classList.add(\"post_content\");\n    postElement.dataset.id = \"postContent\";\n    timeStampEl.innerText = `${date} ${time}`;\n    postContentEl.append(postContent);\n    coordsEl.innerHTML = `${coordinates} &#128065;`;\n\n    postElement.append(timeStampEl);\n    postElement.append(postContentEl);\n    postElement.append(coordsEl);\n    postBoard.prepend(postElement);\n\n    this.postContent = null;\n  }\n}\n","import WidgetTimeLine from \"./widgetTimeLine\";\n\nconst widgetTimeLine = new WidgetTimeLine();\nwidgetTimeLine.init();\n","import \"./css/style.css\";\nimport \"./js/app\";\n\n// TODO: write your code in app.js\n"],"names":["checkCoordinatesValidity","inputValue","newValue","validObj","startsWith","endsWith","slice","length","split","lat","parseFloat","trim","lng","Number","isNaN","Math","abs","timerFunction","minutes","seconds","sec","innerText","min","PopupMessage","constructor","container","document","querySelector","showMessage","modalHtml","insertAdjacentHTML","modalPopup","modalButtonOK","addEventListener","event","preventDefault","remove","recordingFunction","mediatype","navigator","mediaDevices","console","log","mediaContent","mediaType","window","MediaRecorder","timer","submitButton","cancelButton","widgetTimelineForm","timerId","media","createElement","stream","getUserMedia","audio","video","recorder","chunks","videoPlayer","classList","add","srcObject","play","controls","muted","append","before","submitRecord","stop","removeEventListener","cancelRecord","setInterval","evt","push","data","blob","Blob","src","URL","createObjectURL","clearInterval","getTracks","forEach","track","start","e","error","popup","WidgetTimeLine","initHandlers","postForm","controlBar","buttonAudio","buttonVideo","buttonSubmitRecord","buttonCancelRecord","submitPost","target","closest","toggleControls","_ref","recordByMediaType","_ref2","postContent","checkGeoLocAPI","eventTarget","undefined","mediaRecord","controlBarChildren","children","constrolBarEl","toggle","showModalManualCoords","modalManualCoordsHtml","modalForm","setAttribute","addPost","coords","contains","value","setCustomValidity","formValidity","coordsObj","errorMessageCoords","errorMessageLat","errorMessageLng","reportValidity","errorMessage","init","widgetTimelineHtml","post","reset","geolocation","getCurrentPosition","position","latitude","longitude","postBoard","date","Date","toLocaleDateString","time","toLocaleTimeString","coordinates","postElement","timeStampEl","postContentEl","coordsEl","dataset","id","innerHTML","prepend","widgetTimeLine"],"sourceRoot":""}